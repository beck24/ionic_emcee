<ion-content padding>
  <div class="wrapper" *ngIf="stateLoaded">
    <div class="section" padding>
      <div class="error" *ngIf="errors.length">
        <ul>
          <li *ngFor="let error of errors">{{ error }}</li>
        </ul>
      </div>

      <div *ngIf="deviceConnectionService.qrcode" text-center>
        <img [src]="deviceConnectionService.qrcode" class="qrcode"/>
      </div>

      <div *ngIf="!deviceConnectionService.qrcode">
        <p>
          To set this device up as the display ensure that it is connected to the same WIFI network as the controller
          device.
        </p>

        <p>
          Note that the WIFI network does not need to be connected to the public internet. This can be a standard
          router, or
          even setting one of the devices to act as a mobile hotspot.
        </p>

        <p>
          Once the device is connected to the WIFI tap the button below to begin the connection.
        </p>

        <p>
          To exit device mode and return to this setup tap anywhere 5 times in rapid succession.
        </p>
      </div>
    </div>

    <div class="section" padding>
      <div *ngIf="deviceConnectionService.serverStarted">
        <p>Scan the code with the controller device to begin</p>

        <p>
          IP: {{ deviceConnectionService.thisDevice.ipaddress }}<br>
        </p>
      </div>

        <div
          *ngIf="!deviceConnectionService.serverStarted"
          class="setup-button"
          text-center
          padding
          tappable
          (click)="startServer()"
        >
          <div class="setup-icon">
              <ion-icon name="log-in"></ion-icon>
          </div>

          <div class="button-text">
            Connect
          </div>
        </div>

        <div
          *ngIf="!deviceConnectionService.serverStarted"
          class="setup-button danger"
          text-center
          padding
          tappable
          (click)="reset()"
        >
          <div class="setup-icon">
              <ion-icon name="close"></ion-icon>
          </div>

          <div class="button-text">
            Cancel
          </div>
        </div>

        <div
          *ngIf="deviceConnectionService.serverStarted"
          class="setup-button danger"
          text-center
          padding
          tappable
          (click)="stopServer()"
        >
          <div class="setup-icon">
              <ion-icon name="close"></ion-icon>
          </div>

          <div class="button-text">
            Disconnect
          </div>
        </div>
    </div>
  </div>
</ion-content>